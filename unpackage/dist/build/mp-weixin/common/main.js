(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{5122:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o,r,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(o,r)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function u(e){a(i,o,r,u,c,"next",e)}function c(e){a(i,o,r,u,c,"throw",e)}u(void 0)})}}n("1dd6");var u=n("7333"),c=u.setStorage,s=u.getStorage,f=n("ba89"),l=f.AUTH,d=n("06c6"),h=d.request,p=n("ef03"),g=p.LOGIN_TOKEN_REFRESH,v=p.LOGIN_OPENID_REFRESH,b={globalData:{typeId:"",fm:"",productImgList:[],clotheInfo:{},choosedProduceId:"",previewInfo:{},addressInfor:null,moveViewWidth:200,moveViewHeight:228},data:function(){return{hasRefresh:!0}},methods:{isIpad:function(){s("sysInfo").model.indexOf("iPad")>-1&&(s("sysInfo").windowWidth<820?(this.$options.globalData.moveViewWidth=350,this.$options.globalData.moveViewHeight=400):(this.$options.globalData.moveViewWidth=466,this.$options.globalData.moveViewHeight=530))},canIuse:function(){return s("isLogin")&&this.data.hasRefresh},getFrom:function(e,t){for(var n in t)e+=-1===e.indexOf("?")?"?":"&",e+="".concat(n,"=").concat(t[n]);this.$options.globalData.fm="/".concat(e)},handleLogin:function(){var t=i(o.default.mark(function t(){var n,r,a,i,u,f,d,p,b,m,w=this;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.hasRefresh=!1,n=s("isLogin"),!n){t.next=25;break}return r="",a=s("refreshToken"),t.next=7,h({method:"POST",url:"".concat(g,"?refreshToken=").concat(a),needToken:!1,showLoading:!1,hideLoading:!1,showErrorModal:!1,errorText:"refreshToken刷新失败"}).catch(function(e){return console.log(e)});case 7:if(i=t.sent,!i){t.next=12;break}r=i.token,t.next=20;break;case 12:return u=s("userInfo"),f=u.openId,t.next=15,h({method:"POST",url:"".concat(v,"?openId=").concat(f),needToken:!1,showLoading:!1,hideLoading:!1,showErrorModal:!1,errorText:"openId刷新失败",returnHeader:!0}).catch(function(e){return console.log(e)});case 15:d=t.sent,p=d.header,b=d.data,r=b.token,c("refreshToken",p.Authorization);case 20:c("tempToken",r),this.hasRefresh=!0,e.navigateTo({url:this.$options.globalData.fm,fail:function(){e.switchTab({url:w.$options.globalData.fm})}}),t.next=27;break;case 25:m=getCurrentPages(),(0===m.length||m[m.length-1].route!==l)&&e.reLaunch({url:l});case 27:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()},onLaunch:function(e){this.$options.data;if(!s("sysInfo",!0)){var t=wx.getSystemInfoSync(),n=t.screenWidth,o=t.screenHeight;t.screenHeightRpx=750*o/n,t.perRpx=n/750,c("sysInfo",t)}this.isIpad();var r=e.path,a=e.query;this.getFrom(r,a),this.handleLogin()},onShow:function(){},onHide:function(){}};t.default=b}).call(this,n("543d")["default"])},"6bf8":function(e,t,n){},"8c58":function(e,t,n){"use strict";(function(e){n("a824"),n("921b");var t=a(n("66fd")),o=a(n("d5de")),r=a(n("63ea"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default.config.productionTip=!1,t.default.prototype.$store=r.default,o.default.mpType="app";var c=new t.default(i({store:r.default},o.default));e(c).$mount()}).call(this,n("543d")["createApp"])},d5de:function(e,t,n){"use strict";n.r(t);var o=n("f117");for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);n("e6db");var a,i,u=n("2877"),c=Object(u["a"])(o["default"],a,i,!1,null,null,null);t["default"]=c.exports},e6db:function(e,t,n){"use strict";var o=n("6bf8"),r=n.n(o);r.a},f117:function(e,t,n){"use strict";n.r(t);var o=n("5122"),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=r.a}},[["8c58","common/runtime","common/vendor"]]]);